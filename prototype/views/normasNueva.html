<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/masterPageStyles.css" rel="stylesheet">
    <link href="../css/packOneStyles.css" rel="stylesheet">
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/moment.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    
    <script type="text/javascript" src="../js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="../css/bootstrap-datetimepicker.min.css" />

    <!--<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>-->
    <script type="text/javascript">
    	$(function(){
    		/* para master page */
    		var numQues = 1;
    		$("#side-menu-container").mouseenter(function(){
    			$(this).children("#side-menu-label").children("#icon-triangle").removeClass("glyphicon-triangle-right").addClass("glyphicon-triangle-left");
    		}).mouseleave(function(){
    			$(this).children("#side-menu-label").children("#icon-triangle").removeClass("glyphicon-triangle-left").addClass("glyphicon-triangle-right");
    		});
    		/* aquí termina lo de la master page*/
    		function selectAsk(){
    			selectedVal = $( "#pregunta-tipo option:selected").val();
    			switch(selectedVal) {
				    case "opc":
				        $("#contenido-opc").css("display", "block");
				        $("#contenido-chk").css("display", "none");
						$("#contenido-num").css("display", "none");
						$("#contenido-txt").css("display", "none");
						$("#add-ques-btn").css("display", "initial");
				        break;
				    case "chk":
				        $("#contenido-opc").css("display", "none");
				        $("#contenido-chk").css("display", "block");
						$("#contenido-num").css("display", "none");
						$("#contenido-txt").css("display", "none");
						$("#add-ques-btn").css("display", "initial");
				        break;
				    case "num":
				        $("#contenido-opc").css("display", "none");
				        $("#contenido-chk").css("display", "none");
						$("#contenido-num").css("display", "block");
						$("#contenido-txt").css("display", "none");
						$("#add-ques-btn").css("display", "initial");
				        break;
				    case "txt":
				        $("#contenido-opc").css("display", "none");
				        $("#contenido-chk").css("display", "none");
						$("#contenido-num").css("display", "none");
						$("#contenido-txt").css("display", "block");
						$("#add-ques-btn").css("display", "initial");
				        break;
				    case "pic":
				    	$("#contenido-opc").css("display", "none");
				        $("#contenido-chk").css("display", "none");
						$("#contenido-num").css("display", "none");
						$("#contenido-txt").css("display", "none");
				    	$("#add-ques-btn").css("display", "initial");
				        break;
				    case "fec":
				    	$("#contenido-opc").css("display", "none");
				        $("#contenido-chk").css("display", "none");
						$("#contenido-num").css("display", "none");
						$("#contenido-txt").css("display", "none");
				    	$("#add-ques-btn").css("display", "initial");
				        break;
				    default:
				    	$("#contenido-opc").css("display", "none");
				        $("#contenido-chk").css("display", "none");
						$("#contenido-num").css("display", "none");
						$("#contenido-txt").css("display", "none");
						$("#add-ques-btn").css("display", "none");
				        break;
				}
    		}
    		
    		$("#pregunta-tipo").change(selectAsk);
    		
    		function deleteOption(){
    			$(this).closest(".option-wrapper").remove();
    		}
    		function addCheckBoxOp(){
    			var optionChkTemplate = $("#option-template").clone();
    			optionChkTemplate.attr("id","");
    			optionChkTemplate.css("display","block");
    			optionChkTemplate.addClass("ques-chk");
    			optionChkTemplate.click(deleteOption);
    			txtChk = $("#txt-chk").val();
    			if(txtChk){
    				optionChkTemplate.children(".option-text").html(txtChk);    				
    				$("#txt-chk").before(optionChkTemplate);
    				txtChk = $("#txt-chk").val("");
    			}
    		}

    		function addRadioOp(){
    			var optionChkTemplate = $("#option-template").clone();
    			optionChkTemplate.attr("id","");
    			optionChkTemplate.css("display","block");
    			optionChkTemplate.addClass("ques-opc");
    			optionChkTemplate.click(deleteOption);
    			txtChk = $("#txt-opc").val();
    			$("#txt-opc").val("");
    			if(txtChk){
    				optionChkTemplate.children(".option-text").html(txtChk);    				
    				$("#txt-opc").before(optionChkTemplate);
    				txtChk = $("#txt-opc").val("");
    			}
    		}

    		$(".close").click(deleteOption);

    		$("#add-chk").click(addCheckBoxOp);

    		$("#txt-chk").keypress(function(e) {
			    if(e.which == 13) {
			        addCheckBoxOp();
			    }
			});

    		$("#add-opc").click(addRadioOp);

    		$("#txt-opc").keypress(function(e) {
			    if(e.which == 13) {
			        addRadioOp();
			    }
			});

    		$("#add-ques").click(function(){
    			var selectedVal = $( "#pregunta-tipo option:selected").val();
    			var quesText = $("#pregunta-norma").val();
    			var quesCont = $("#ques-container").clone();
    			quesCont.css("display","block");
    			quesCont.children(".close").click(deleteOption);
    			quesCont.children(".ques-text").html(quesText);
    			switch(selectedVal) {
				    case "opc":
						var options = $(".ques-opc > .option-text").clone();
						for(var i = 0; i < options.length; i++){
							quesCont.append('<div class="radio"><label><input type="radio" name="q'+numQues+'">'+$(options[i]).html()+'</label></div>');
				    	}
				    	$(".ques-opc").remove();
				        break;
				    case "chk":
				    	var options = $(".ques-chk > .option-text").clone();
				    	for(var i = 0; i < options.length; i++){
							quesCont.append('<div class="checkbox"><label><input type="checkbox" name="q'+numQues+'">'+ $(options[i]).html() +'</label></div>');
				    	}
				    	$(".ques-chk").remove();
				        break;
				    case "num":
				    	var max = $("#max-num").val();
				    	var min = $("#min-num").val();
				    	quesCont.append('<input class="form-control" type="number" min="'+min+'" max="'+max+'" style="width:150px;">');
				        break;
				    case "txt":
				    	var max = $("#max-text").val();
				    	quesCont.append('<textarea id="descripcion-norma" cols="70" rows="2" class="form-control" placeholder="Escriba Respuesta" ></textarea>');
				        break;
				    case "pic":
				        quesCont.append('<div class="input-group"><input type="text" class="form-control" placeholder="nombre de archivo" aria-describedby="basic-addon2"><span class="input-group-addon" id="basic-addon1"><span id="icon-triangle" class="glyphicon glyphicon-camera"></span></span></div>');
				        break;
				    case "fec":
						quesCont.append('<input type="date" class="form-control" name="dateQues'+numQues+'" style="width:200px;">');
				        break;
				}
				$("#new-ques-container").before(quesCont);
				if(selectedVal == "fec"){
					$('#datetimepicker' + numQues + '').datetimepicker({
				      pickTime: false	
				    });
				}
				$("#pregunta-norma").val("");
				numQues++;
    		});

    	});
    </script>
	<title>CmcReporter</title>
</head>
<body>
	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
		<div  id="master-header" class="row">
			<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
				<div>Bienvenido <label>Arturo Vazquez A</label></div>
				<div><label>17 de Junio del 2017</label></div>
				<div>Cliente: <label>Comercializadora del Sur S.A. de C.V.</label> </div>
				<div>Sucursal: <label>Av. Xalapa Esq. Ruiz Cortinez</label> </div>
				<div>Año: <label>2017</label> </div>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 col-lg-offset-6 col-md-offset-6 col-sm-offset-6 col-xs-offset-6">
				<div style="text-align: right;"><b>Home</b>|<a href="../index.html">Cerrar Sesion</a></div>
				<div><img src="../img/logo-min.png"></div>
			</div>
		</div>
		<div class="row master-content">
			<div id="side-menu-container" class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
				<div id="side-menu">
					<a href="InfoGeneral.html">
						<div  id="menu-gral" class="side-menu-item">
						</div>
					</a>
					<a href="normas.html">
						<div id="menu-normas" class="side-menu-item">
						</div>
					</a>
					<a href="auditorias.html">
						<div id="menu-auditorias" class="side-menu-item">
						</div>
					</a>
					<a href="reportes.html">
						<div id="menu-reportes" class="side-menu-item">
						</div>
					</a>
					<a href="usuarios.html">
						<div id="menu-usuarios" class="side-menu-item">
						</div>
					</a>
				</div>
				<div id="side-menu-label" class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
					<span id="icon-triangle" class="glyphicon glyphicon-triangle-right"></span>
				</div>
			</div>
			<div id="content" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
				<div class="norm-container">
					<input class="form-control text-input" id="cod-norma" type="text" placeholder="Código norma">
					<textarea id="descripcion-norma" cols="70" rows="5" class="form-control" placeholder="Descripción de la norma" ></textarea>
					<div id="ques-container" class="option-wrapper" style="display: none;">
						<button type="button" class="close" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<label class="ques-text"></label>
					</div>
					<div id="new-ques-container">
						<input class="form-control text-input" id="pregunta-norma" type="text" placeholder="Pregunta">
						<select class="form-control" id="pregunta-tipo" placeholder="Tipo de respuesta">
							<option>-- Seleccione una opción --</option>
					        <option value="chk">Check box</option>
					        <option value="num">Cantidad</option>
					        <option value="opc">Opcion múltiple</option>
					        <option value="txt">Respuesta abierta</option>
					        <option value="fec">Fecha</option>
					        <option value="pic">Foto</option>
						</select>
						<div id="pregunta-contenido">
							<div id="contenido-chk">
								<div id="option-template" class="option-wrapper" style="width:300px;display: none;">
								  <button type="button" class="close"aria-label="Close">
								  	<span aria-hidden="true">&times;</span>
								  </button>
								  <label class="option-text"></label>
								</div>
								<input id="txt-chk" class="form-control text-input" type="text" placeholder="Agregar Opción">
								<span id="add-chk" class="glyphicon glyphicon-plus-sign"></span>
							</div>
							<div id="contenido-num">
								<label>Número Máximo:</label>
								<input id="min-num" class="form-control" type="number" min="0">
								<label>Número Mínimo:</label>
								<input id="max-num" class="form-control" type="number" min="0">
							</div>
							<div id="contenido-opc">
								<input id="txt-opc" class="form-control text-input" type="text" placeholder="Agregar Opción">
								<span id="add-opc" class="glyphicon glyphicon-plus-sign"></span>
							</div>
							<div id="contenido-txt">
								<label>Longitud máxima:</label>
								<input id="max-txt" class="form-control" type="number" min="0">
							</div>
						</div>
						<div id="add-ques-btn" class="row" style="margin-bottom:0px !important; display: none;">
							<div class="col-lg-2 col-md-2 col-sm-6 col-xs-6 col-lg-offset-9 col-md-offset-9 col-sm-offset-6 col-xs-offset-6">
								<input id="add-ques" class="btn cmc-btn right" type="button" value="Agregar pregunta" style="margin-bottom:0px !important;">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>